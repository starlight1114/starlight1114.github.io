---
title: "Probability"
format:
  html:
    code-fold: true
    code-summary: "Show the code"
    code-overflow: wrap
date: October 30, 2025
execute: 
  warning: false
  message: false
---

This project is inspired by a walk I took on last Saturday night. That night, I chose to walk around the 5Cs for around 3 hours, and I ran into around 8 of my close friends and had a lot of fun. As I walked, I ran into different sized groups of people, sometimes I would pass no one and sometimes I would pass huge groups of people. My goal for this assignment is to answer the question, "What is the probability that I run into 'X' number of friends on a given night of walking around the 5Cs?". I then want to use this calculation to see whether my Saturday night where I ran into 8 people could have happened randomly or if there were external factors that played into the number of friends that I saw.

I chose to model the group sizes using a discrete exponentially distributed set of random numbers with a rate of 0.25 since I approximate that I would run into an average of 4 people per minute.

```{r, include=FALSE}
library(tidyverse)
```

```{r}
#sample plot of the distributions of the number of people I would see each minute over 3 hours
set.seed(14)
exprate <- 0.25
random_exponent <- data.frame(n = map_dbl(1:180, function(x){
    floor(rexp(1, exprate))}))
ggplot(random_exponent, aes(x = n))+
  geom_histogram(binwidth = 0.5)+
  labs(
    x = "Number of people seen each minute",
    title = "Sample distribution of the number of people seen each minute for \n180 minutes"
  )
```

This plot shows how many times I see a certain number of people each minute if I walk around for 180 minutes. It shows that in this case, I would most commonly see 0 people per minute during my walk, followed by 1 person per minute, then 2 people per minute.

Each person in each group of people I pass gets assigned a random number which indicates their closeness to me. I say that I am equally likely to see anyone from my closest friend (1) to my least close friend at the 5Cs (6000). For example, if I passed 2 people in the same minute (the randomly generated exponentially distributed number from before), my 5th closest friend and my 16th closest friend, that minute would be given the vector (5, 16). Then, I take the random numbers that have been generated for each minute and put them into one long vector, basically the vector of people I have seen throughout the entire night.

```{r}
#pass random people walking around the 5Cs
start_walking_for <- function(number_of_minutes, how_close){
  people_passed <- map_dbl(1:number_of_minutes, function(x){
    floor(rexp(1, exprate))}) #vector of the number of people I pass every minute
  list_of_people <- map(people_passed, function(x){sample(1:6000, x, replace = TRUE)})
  vector_of_people <- unlist(list_of_people) #Time steps do not matter, so it doesn't matter if I see someone in minute 1 or minute 156.
  sum(vector_of_people <= how_close) #How many times do I see someone who is my close friend?
}
```

To count the number of times I see my close friends, I have to set a cutoff for what counts as a close friend and what counts as a not-so-close friend. I arbitrarily picked that number as 15, since I feel like there are about 15 people in the 5Cs who I would stop and have a conversation with in the middle of the night if I saw them.

I ran this simulation for 5000 nights to see what the average number of friends I would see per 180-minute night would be.

```{r}
walking_time <- 180
friends <- 15
nights <- 5000  

simulation <- data.frame(friends_seen = map_dbl(1:nights, ~start_walking_for(walking_time, friends)))

ggplot(simulation) +
  geom_histogram(aes(x = friends_seen), binwidth = 0.5) +
  labs(
    title = "How many times do I see a certain number of friends in one night?",
    subtitle = paste("Total nights = ", nights),
    x = "Number of friends seen",
    y = "Number of nights walking around"
  )
  
```

This plot shows that it is very unlikely to have a night like my Saturday night where I saw 8 of my close friends. This means that either I was more likely to see my friends than non-friends on Saturday (which is true since I knew where they generally were that night and used Find My once to find a friend), that I saw more people on my walk than I estimated, or that I am closer with more people than I estimated.

The plot also shows that I am most likely to see one friend on a given 3-hour walk, but for about 1100 of my 5000 simulated walks, I see no friends.

To simulate my weekend night walks around the 5Cs, I generated randomly sized groups of people that I saw every minute that usually ranged from 0 to around 18 people. Then, I gave each person in that group a random "closeness score" to me, which indicated how well I knew them. Then, I counted how many times I ran into people that were a certain degree of closeness to me, and ran that simulation many times to determine what the most likely outcome of a night of randomly walking around the 5C campus was (in places where other people also go).

One way that this model could be improved is to account for my arrival to points of interest where many people congregate at once like Jay's Place, the Hub, or parties. Another way that this simulation could be improved is to account for the fact that most of my friends are friends with each other, so they are more likely to be traveling in a group together than dispersed among many groups of people.
